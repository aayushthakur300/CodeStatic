<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeStatic</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body class="dangerous-theme">

<div id="loadingOverlay" class="loading-overlay">
    <div class="loader-content">
        <i class="fas fa-microchip fa-spin fa-3x"></i>
        <h2>ASSESSMENT PROCESSING...</h2>
        <p>Analyzing Syntax • Checking Logic • Grading Quality</p>
    </div>
</div>

<nav class="navbar" id="mainNav">
    <div class="nav-left">
       <div class="logo-area">
            <h1 id="codestaticTitle">  
                <span class="brand-code">CODE</span><span class="brand-static">STATIC</span>
            </h1>
        </div> 
    </div>

    <div class="nav-right">
        <div class="control-group">
            <button class="ai-chat-btn" id="projectsButton" title="My Projects">
                <i class="fas fa-folder"></i> 
            </button>

            <button class="ai-chat-btn" onclick="toggleChat()" title="AI Code Assistant">
                ✨ 
            </button>
            
            <button class="pdf-nav-btn" onclick="downloadPdf()" title="Download Report as PDF">
                <i class="fas fa-file-pdf"></i>
            </button>

            <select id="targetLang">
                <option value="Python">Python</option>
                <option value="JavaScript">JavaScript</option>
                <option value="Java">Java</option>
                <option value="C">C</option>
                <option value="C++">C++</option>
                <option value="C#">C#</option>
                <option value="Go">Go</option>
                <option value="Rust">Rust</option>
                <option value="Swift">Swift</option>
                <option value="Kotlin">Kotlin</option>
                <option value="TypeScript">TypeScript</option>
                <option value="Ruby">Ruby</option>
                <option value="R">R</option>
                <option value="Perl">Perl</option>
                <option value="Elixir">Elixir</option>
                <option value="Dart">Dart</option>
                <option value="Shell">Shell (Bash)</option>
                <option value="PHP">PHP</option>
                <option value="SQL">SQL</option>
                <option value="Lua">Lua</option>
                <option value="MATLAB">MATLAB</option>
            </select>
            <button id="convertBtn" onclick="handleAssessment()">
                RUN <i class="fas fa-bolt"></i>
            </button>
        </div>
        <button class="theme-toggle" onclick="toggleTheme()">
            <i class="fas fa-moon" id="themeIcon"></i>
        </button>
    </div>
</nav>

<div id="chatWidget" class="chat-widget">
    <div class="chat-header">
        <span>✨ CodeStatic Assistant</span>
        <button onclick="toggleChat()"><i class="fas fa-times"></i></button>
    </div>
    <div class="chat-body" id="chatBody">
        <div class="chat-msg ai-msg">Hello! I am your AI coding assistant. How can I help you optimize your code today?</div>
    </div>
    <div class="chat-input-area">
        <textarea id="chatInput" placeholder="Ask about the code... (Shift+Enter for new line)" onkeypress="handleChatEnter(event)"></textarea>
        <button onclick="sendChatMessage()"><i class="fas fa-paper-plane"></i></button>
    </div>
</div>

<div id="projectsPanel" class="projects-panel" style="display:none;">
    <div class="panel-header">
        <span><i class="fas fa-archive"></i> Saved Projects</span>
        <button onclick="document.getElementById('projectsPanel').style.display='none'" style="background:none; border:none; color:white; cursor:pointer;">
            <i class="fas fa-times"></i>
        </button>
    </div>
    <div class="panel-body" id="projectList">
        </div>
    <div class="panel-footer" style="padding: 10px; border-top: 1px solid #333;">
        <button id="saveProjectBtn" onclick="saveProject()" style="width: 100%; padding: 8px; cursor: pointer;">
            <i class="fas fa-save"></i> SAVE CURRENT PROJECT
        </button>
    </div>
</div>

<div class="main-container" id="mainContainer">
    
    <div class="col-left" id="colLeft">
        <div class="panel code-panel">
            <div class="panel-header">
                <span class="panel-title"><i class="fas fa-code"></i> CANDIDATE SUBMISSION</span>
                <div style="display: flex; align-items: center; gap: 10px;">
                    
                    <button class="copy-btn" onclick="copyContent('inputCode')"><i class="fas fa-copy"></i> Copy</button>
                    <span class="badge" id="detectedLang">--</span>
                </div>
            </div>
            <div class="editor-wrapper">
                <div class="line-numbers" id="inputLines">1</div>
                <textarea id="inputCode" placeholder="// Paste candidate's code here..." 
                    oninput="updateLineNumbers('inputCode', 'inputLines')" 
                    onscroll="syncScroll('inputCode', 'inputLines')"></textarea>
            </div>
        </div>
    </div>

    <div class="gutter" id="resizeHandle"></div>

    <div class="col-right" id="colRight">
        
        <div id="analysisReport" class="panel analysis-box">
            <div class="analysis-header-group">
                <div class="header-top">
                    <span class="panel-title error-title"><i class="fas fa-bug"></i> CRITICAL ERROR LOG</span>
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <button class="copy-btn" onclick="copyTable()"><i class="fas fa-copy"></i> Copy Log</button>
                    </div>
                </div>
                
                <div class="quality-score-bar">
                    <span id="qualityScoreDisplay"><i class="fas fa-star-half-stroke"></i> Quality Score: --/100</span>
                </div>

                <div class="integrity-bar">
                    <span id="integrityCheck">Integrity: --</span>
                </div>
                <div class="plagiarism-bar">
                  <span id="plagiarismCheck"><i class="fas fa-shield-alt"></i> Plagiarism Check: </span>  
                </div>
            </div>

            <div class="table-responsive">
                <table id="errorTable">
                    <thead>
                        <tr>
                            <th style="width: 60px;">LINE</th>
                            <th>ERROR DESCRIPTION</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td colspan="2" style="text-align:center; opacity:0.5; padding: 20px;">Run assessment to view errors.</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="panel code-panel">
            <div class="panel-header">
                <span class="panel-title"><i class="fas fa-check-circle"></i> STANDARDIZED & FIXED CODE</span>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <button class="copy-btn" onclick="copyContent('outputCode')"><i class="fas fa-copy"></i> Copy</button>
                </div>
            </div>
            
            <div class="ai-disclaimer">
                Note: STANDARDIZED & FIXED CODE can make mistakes. Please review it before use.
            </div>

            <div class="compliance-bar">
                <span id="complianceStatus"><i class="fas fa-clipboard-check"></i> Compliance Status: PENDING</span>
            </div>

            <div class="editor-wrapper">
                <div class="line-numbers" id="outputLines">1</div>
                <textarea id="outputCode" readonly placeholder="// Assessment results will appear here..." 
                    oninput="updateLineNumbers('outputCode', 'outputLines')" 
                    onscroll="syncScroll('outputCode', 'outputLines')"></textarea>
            </div>
        </div>

        <div class="panel code-panel" style="min-height: 350px;">
            <div class="panel-header">
                <span class="panel-title"><i class="fas fa-book-open"></i> LINE-BY-LINE EXPLANATION</span>
                <button class="copy-btn" onclick="copyExplanationTable()"><i class="fas fa-copy"></i> Copy</button>
            </div>
            <div class="table-responsive">
                <table id="explanationTable" class="explanation-table">
                    <thead>
                        <tr>
                            <th style="width: 30%;">CODE SNIPPET</th>
                            <th>EXPLANATION</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td colspan="2" style="text-align:center; opacity:0.5; padding: 20px;">Explanation will appear here.</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="panel code-panel" style="min-height: auto; height: auto;">
            <div class="panel-header">
                <span class="panel-title"><i class="fas fa-tachometer-alt"></i> COMPLEXITY ANALYSIS</span>
                <button class="copy-btn" onclick="copyComplexity()"><i class="fas fa-copy"></i> Copy</button>
            </div>
            
            <div id="complexityWrapper" class="complexity-container">
                
                <div class="complexity-group">
                    <div class="comp-header-label">TIME COMPLEXITY</div>
                    <div class="comp-grid">
                        <div class="comp-mini-box">
                            <span class="mini-label">BEST</span>
                            <span id="timeBest" class="mini-value">--</span>
                        </div>
                        <div class="comp-mini-box">
                            <span class="mini-label">AVERAGE</span>
                            <span id="timeAvg" class="mini-value">--</span>
                        </div>
                        <div class="comp-mini-box">
                            <span class="mini-label">WORST</span>
                            <span id="timeWorst" class="mini-value">--</span>
                        </div>
                    </div>
                    <p id="timeDesc" class="comp-desc-text">Analysis pending...</p>
                </div>

                <div class="complexity-group">
                    <div class="comp-header-label">SPACE COMPLEXITY</div>
                    <div class="comp-grid">
                        <div class="comp-mini-box">
                            <span class="mini-label">BEST</span>
                            <span id="spaceBest" class="mini-value">--</span>
                        </div>
                        <div class="comp-mini-box">
                            <span class="mini-label">AVERAGE</span>
                            <span id="spaceAvg" class="mini-value">--</span>
                        </div>
                        <div class="comp-mini-box">
                            <span class="mini-label">WORST</span>
                            <span id="spaceWorst" class="mini-value">--</span>
                        </div>
                    </div>
                    <p id="spaceDesc" class="comp-desc-text">Analysis pending...</p>
                </div>

            </div>
        </div>

    </div>

</div>

<script src="/static/script.js"></script>
</body> 
</html>